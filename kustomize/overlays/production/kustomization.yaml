apiVersion: kustomize.config.k8s.io/v1beta1
kind: Kustomization

# Reference base configuration
bases:
  - ../../base

# Production-specific patches
patches:
  # Production replicas (high availability)
  - path: admission-controller-patch.yaml
  - path: kspm-collector-patch.yaml

  # Production resource requests (high)
  - path: sysdig-agent-resources-patch.yaml
  - path: admission-controller-resources-patch.yaml
  - path: node-analyzer-resources-patch.yaml

  # Production-specific configuration
  - path: configmap-patch.yaml

  # Webhook failure policy (enforce after validation)
  - path: webhook-failurepolicy-patch.yaml

# Production-specific labels
commonLabels:
  environment: production
